/* Plugin generated by AMXX-Studio */

#include <amxmodx>
#include <amxmisc>
#include <expmod_shop>
#include <expmod>
#include <fun>
#include <colorchat>

#define PLUGIN "ExpMod Shop 100 hp"
#define VERSION "1.0"
#define AUTHOR "tomcionek15 & grs4"

new const nazwa[] = "Lotek"
new const opis[]  = "Miliony nagrod do wygrania"
new cena = 10;
new one_round = 1;
new enable_if_dead = 1;

new item;
public plugin_init() 
{
	register_plugin(PLUGIN, VERSION, AUTHOR)
	
	item = exp_shop_register_item(nazwa, opis, cena, one_round, enable_if_dead)
}
new prefix[33];
public item_selected(id, itemid)
{
	if(item == itemid)
	{
		exp_shop_get_prefix(prefix, 32)
		set_task(10.0, "Losowanie", id)
		set_task(2.0, "Pokaz", id)
	}
}

public Pokaz(id)
{
	ColorChat(id, GREEN, "%s^x01 Poczekaj cierpliwie na wyniki losowania.", prefix)
}
public Losowanie(id)
{
	new temp = 0;
	switch(random_num(1, 17))
	{
		case 1: 
		{
			temp = random_num(9, 16);
			ColorChat(id, GREEN, "%s^x01 Wygrales^x04 %d^x01 monet.", prefix, temp)
			exp_set_user_monets(id, exp_get_user_monets(id)+temp);
		}
		case 2: 
		{
			temp = random_num(5, 10);
			ColorChat(id, GREEN, "%s^x01 Wygrales^x04 %d^x01 monet.", prefix, temp)
			exp_set_user_monets(id, exp_get_user_monets(id)+temp);
		}
		case 3: 
		{
			temp = random_num(1000, 3500);
			ColorChat(id, GREEN, "%s^x01 Wygrales^x04 %d^x01 expa.", prefix, temp)
			exp_set_user_exp(id, exp_get_user_exp(id)+temp);
		}
		case 4: 
		{
			temp = random_num(0, 1000);
			ColorChat(id, GREEN, "%s^x01 Wygrales^x04 %d^x01 expa.", prefix, temp)
			exp_set_user_exp(id, exp_get_user_exp(id)+temp);
		}
		case 5..10: 
		{
			ColorChat(id, GREEN, "%s^x01 Niesety...^x03 nic^x01 nie wygrales.", prefix)
		}
		case 11..13: 
		{
			if(!is_user_alive(id))
				Losowanie(id)
			temp = random_num(50, 150);
			ColorChat(id, GREEN, "%s^x01 Wygrales^x04 %d^x01 HP.", prefix, temp)
			set_user_health(id, get_user_health(id)+temp)
		}
		case 14..16: 
		{
			if(!is_user_alive(id))
				Losowanie(id)
				
			temp = random_num(100, 300);
			ColorChat(id, GREEN, "%s^x01 Wygrales^x04 %d^x01 ARMORU.", prefix, temp)
			set_user_armor(id, get_user_armor(id)+temp);
		}
		case 17: 
		{
			switch(random_num(1, 30))
			{
				case 1..24: {
					ColorChat(id, GREEN, "%s^x01 Wypadlo losowanie^x03 expa do nastepnego lvl^x01, niestety nie trafiles.", prefix)
					ColorChat(id, GREEN, "%s^x01 Na pocieszenie otrzymujesz ^x04 100 expa.", prefix)
					exp_set_user_exp(id, exp_get_user_exp(id)+100);
				}
				case 25: {
					new nazwa[33]
					get_user_name(id, nazwa, 32);
					new exp = exp_get_levelexp(exp_get_user_level(id)+1)-exp_get_user_exp(id);
					ColorChat(id, GREEN, "%s^x01 Wypadlo losowanie^x03 expa do nastepnego lvl^x01, ^x04 niestety TRAFILES (wygrales %d expa)!!!.", prefix, exp)
					ColorChat(0, GREEN, "%s^x01 Gracz^x04 %s^x01 wygral w Sklepie^x04 Expa do nastepnego lvl^x01( %d )", prefix, exp)
					
					exp_set_user_exp(id, exp_get_user_exp(id)+exp);
				}
				case 26..30:
				{
					ColorChat(id, GREEN, "%s^x01 Wypadlo losowanie^x03 expa do nastepnego lvl^x01, niestety nie trafiles.", prefix)
					ColorChat(id, GREEN, "%s^x01 Na pocieszenie otrzymujesz ^x04 100 expa.", prefix)
					exp_set_user_exp(id, exp_get_user_exp(id)+100);
				}
				
			}
			
			exp_set_user_monets(id, exp_get_user_monets(id)+temp);
		}	
	}
}
